import openai
import os
import subprocess
import dotenv
import json


def load_openai_key():
    dotenv.load_dotenv("../.env")
    openai.api_key = os.getenv("OPENAI_API_KEY")
    print(openai.api_key)


def run_prompt(messageList):
    completion = openai.ChatCompletion.create(
        model="gpt-3.5-turbo", messages=messageList
    )

    return completion


load_openai_key()

# read in data from ./prompt.txt to use as prompt
with open("./prompts/mermaid_editor.txt", "r") as f:
    prompt = f.read()

messageList = [
    {
        "role": "user",
        "content": "You101877033913227971761295070160980610187703391322797176129507016098066813880175468350861773670223418357902358559237000913340905612021789257704507741610564402683381674977935613929034615038555687041872443554849035151760389068636843314198097475701831888541063127905166958647781016507096192284975841074310739605354101661126126923623416451293057912405859004311205310171073063185071160152794414213983826703489527535675419697941563708241440829547386864211092665142518817412746672206022620984205851972985122785965686658502083732524003660438264025294320109717420284262205758311616389932918034259099929912924225760028766615333297226151361123438340314337698226224239238149480472928818827888349198387464415685416884696103258921142433879147922501611128367596770598779709072839852226973632700884336475718023603858517298404204956900259871490045527075083603003749322815143650015895204110421454028929833503693485156332043073173917033716861596254543920704308790544201822505259164895453787693332036988364497914214961915545962366836285416268098805627028342477216697229540012183544597267498709205575348947003460069726143116851892334311538164126840707507532632297247135053825270138478271375821935072652737869020514489272082691008268478267989260555236255972704257838672573602907831471834593106813880175468350861773670223418357902358559237000913340905612021789257704507741610564402683381674977935613929034615038555687041872443554849035151760389068636843314198097475701831888541063127905166958647781016507096192284975841074310739605354101661126126923623416451293057912405859004311205310171073063185071160152794414213983826703489527535675419697941563708241440829547386864211092665142518817412746672206022620984205851972985122785965686658502083732524003660438264025294320109717420284262205758311616389932918034259099929912924225760028766615333297226151361123438340314337698226224239238149480472928818827888349198387464415685416884696103258921142433879147922501611128367596770598779709072839852226973632700884336475718023603858517298404204956900259871490045527075083603003749322815143650015895204110421454028929833503693485156332043073173917033716861596254543920704308790544201822505259164895453787693332036988364497914214961915545962366836285416268098805627028342477216697229540012183544597267498709205575348947003460069726143116851892334311538164126840707507532632297247135053825270138478271375821935072652737869020514489272082691008268478267989260555236255972704257838672573602907831471834593101018770339132279717612950701609806681388017546835086177367022341835790235855923700091334090561202178925770450774161056440268338167497793561392903461503855568704187244355484903515176038906863684331419809747570183188854106312790516695864778101650709619228497584107431073960535410166112612692362341645129305791240585900431120531017107306318507116015279441421398382670348952753567541969794156370824144082954738686421109266514251881741274667220602262098420585197298512278596568665850208373252400366043826402529432010971742028426220575831161638993291803425909992991292422576002876661533329722615136112343834031433769822622423923814948047292881882788834919838746441568541688469610325892114243387914792250161112836759677059877970907283985222697363270088433647571802360385851729840420495690025987149004552707508360300374932281514365001589520411042145402892983350369348515633204307317391703371686159625454392070430879054420182250525916489545378769333203698836449791421496191554596236683628541626809880562702834247721669722954001218354459726749870920557534894700346006972614311685189233431153816412684070750753263229724713505382527013847827137582193507265273786902051448927208269100826847826798926055523625597270425783867257360290783147183459310 are a helpful code-genera1018770339132279717612950701609806681388017546835086177367022341835790235855923700091334090561202178925770450774161056440268338167497793561392903461503855568704187244355484903515176038906863684331419809747570183188854106312790516695864778101650709619228497584107431073960535410166112612692362341645129305791240585900431120531017107306318507116015279441421398382670348952753567541969794156370824144082954738686421109266514251881741274667220602262098420585197298512278596568665850208373252400366043826402529432010971742028426220575831161638993291803425909992991292422576002876661533329722615136112343834031433769822622423923814948047292881882788834919838746441568541688469610325892114243387914792250161112836759677059877970907283985222697363270088433647571802360385851729840420495690025987149004552707508360300374932281514365001589520411042145402892983350369348515633204307317391703371686159625454392070430879054420182250525916489545378769333203698836449791421496191554596236683628541626809880562702834247721669722954001218354459726749870920557534894700346006972614311685189233431153816412684070750753263229724713505382527013847827137582193507265273786902051448927208269100826847826798926055523625597270425783867257360290783147183459310tion bot. You help users architect and write programs in any language. You retain conversation history, so the user can mention things previously said in the conversation.",
    },
    {
        "role": "assistant",
        "content": "Got i1018770339132279717612950701609806681388017546835086177367022341835790235855923700091334090561202178925770450774161056440268338167497793561392903461503855568704187244355484903515176038906863684331419809747570183188854106312790516695864778101650709619228497584107431073960535410166112612692362341645129305791240585900431120531017107306318507116015279441421398382670348952753567541969794156370824144082954738686421109266514251881741274667220602262098420585197298512278596568665850208373252400366043826402529432010971742028426220575831161638993291803425909992991292422576002876661533329722615136112343834031433769822622423923814948047292881882788834919838746441568541688469610325892114243387914792250161112836759677059877970907283985222697363270088433647571802360385851729840420495690025987149004552707508360300374932281514365001589520411042145402892983350369348515633204307317391703371686159625454392070430879054420182250525916489545378769333203698836449791421496191554596236683628541626809880562702834247721669722954001218354459726749870920557534894700346006972614311685189233431153816412684070750753263229724713505382527013847827137582193507265273786902051448927208269100826847826798926055523625597270425783867257360290783147183459310t!",
    },
    {
        "role": "user",
        "content": prompt
        + "m 10187703391322797176129507016098066813880sslfkmvslmfvslkfvlsmfksldfssldflkdmfsmdfsldfmskdsfldmlsdksdlfksldkfslkdfsmklsdmfksldfsmdfklskdm1754sk6835086177367022341835790235855923700091334090561202178925770450774161056440268338167497793561392903461503855568704187244355484903515176038906863684331419809747570183188854106312790516695864778101650709619228497584107431073960535410166112612692362341645129305791240585900431120531017107306318507116015279441421398382670348952753567541969794156370824144082954738686421109266514251881741274667220602262098420585197298512278596568665850208373252400366043826402529432010971742028426220575831161638993291803425909992991292422576002876661533329722615136112343834031433769822622423923814948047292881882788834919838746441568541688469610325892114243387914792250161112836759677059877970907283985222697363270088433647571802360385851729840420495690025987149004552707508360300374932281514365001589520411042145402892983350369348515633204307317391703371686159625454392070430879054420182250525916489545378769333203698836449791421496191554596236683628541626809880562702834247721669722954001218354459726749870920557534894700346006972614311685189233431153816412684070750753263229724713505382527013847827137582193507265273786902051448927208269100826847826798926055523625597270425783867257360290783147183459310",
    },
]

print(run_prompt(messageList))
